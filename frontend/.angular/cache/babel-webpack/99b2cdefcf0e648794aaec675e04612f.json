{"ast":null,"code":"import { AutoGravity } from \"../../qualifiers/gravity/autoGravity/AutoGravity.js\";\nimport { FocusOnGravity } from \"../../qualifiers/gravity/focusOnGravity/FocusOnGravity.js\";\nimport { autoGravity } from \"../../qualifiers/gravity.js\";\nimport { FocusOnValue } from \"../../qualifiers/focusOn.js\";\n/**\n * true if gravity starts with 'auto' or 'auto:'\n * @param gravity\n */\n\nfunction isIAutoGravityString(gravity) {\n  return gravity && `${gravity}`.split(':')[0] === 'auto';\n}\n/**\n * Validate that given val is an ICompassGravity\n * @param gravity\n */\n\n\nfunction isCompassGravity(gravity) {\n  //const gravityString = `${(typeof gravity === \"string\" ? gravity : gravity.qualifierValue)}`;\n  const gravityValue = getGravityValue(gravity);\n  return ['north', 'center', 'east', 'west', 'south', 'north_west', 'south_east', 'south_west', 'north_east'].includes(gravityValue);\n}\n/**\n * Get the value of given gravity\n * @param gravity\n */\n\n\nfunction getGravityValue(gravity) {\n  return `${gravity}`.replace('g_', '');\n}\n/**\n * Creates a compassGravity model\n * @param gravity\n */\n\n\nfunction createCompassGravityModel(gravity) {\n  return {\n    compass: getGravityValue(gravity),\n    gravityType: 'direction'\n  };\n}\n/**\n * Validate that given gravity is an instance of ocr gravity\n * @param gravity\n */\n\n\nfunction isOcrGravity(gravity) {\n  return getGravityValue(gravity) === 'ocr_text';\n}\n/**\n * Creates an ocr gravity model\n */\n\n\nfunction createOcrGravityModel() {\n  return {\n    gravityType: 'ocr'\n  };\n}\n/**\n * Validate that given gravity is an instance of AutoGravity\n * @param gravity\n */\n\n\nfunction isAutoGravity(gravity) {\n  return `${gravity.qualifierValue}`.split(':')[0] === 'auto';\n}\n/**\n * Create an instance of IAutoGravityObjectModel\n * @param gravity\n */\n\n\nfunction createIAutoFocusObject(gravity) {\n  const gravityString = gravity.toString();\n  const values = gravityString.split('_');\n  const result = {\n    object: values[0]\n  };\n\n  if (values.length > 1) {\n    if (values[1] === 'avoid') {\n      result.avoid = true;\n    } else {\n      result.weight = +values[1];\n    }\n  }\n\n  return result;\n}\n/**\n * Creates an auto gravity model from given AutoGravity\n * @param gravity\n */\n\n\nfunction createAutoGravityModel(gravity) {\n  let values;\n  const gravityQualifier = gravity === 'auto' ? new AutoGravity() : gravity;\n\n  if (`${gravity}`.startsWith('auto:')) {\n    values = `${gravity}`.split(':').filter(v => v !== 'auto');\n  } else {\n    values = gravityQualifier.qualifierValue.values.filter(v => v !== 'auto');\n  }\n\n  const autoFocus = values.map(createIAutoFocusObject);\n  return {\n    gravityType: 'auto',\n    autoFocus\n  };\n}\n/**\n * Create IFocusOnGravityModel from FocusOnGravity\n * @param gravity\n */\n\n\nfunction createFocusOnGravityModel(gravity) {\n  const hasAutoGravity = `${gravity}`.split(':').includes('auto');\n  const values = gravity.qualifierValue.values;\n  const focusOnValues = hasAutoGravity ? values.slice(0, values.length - 1) : values;\n  const result = {\n    gravityType: 'object',\n    focusOnObjects: focusOnValues.map(v => `${v}`)\n  };\n\n  if (hasAutoGravity) {\n    // Remove the first 'auto' value by slicing it, because it's added by autoGravity()\n    const autoFocusObjects = values[values.length - 1].values.slice(1);\n    const autoGravityInstance = autoGravity().autoFocus(...autoFocusObjects);\n    result.fallbackGravity = createAutoGravityModel(autoGravityInstance);\n  }\n\n  return result;\n}\n/**\n * Creates a FocusOnGravity from given string\n * @param gravity\n */\n\n\nfunction createFocusOnGravity(gravity) {\n  const values = gravity.split(':');\n  const focusOnValues = values.map(g => new FocusOnValue(g));\n  return new FocusOnGravity(focusOnValues);\n}\n/**\n * Create a model of given gravity\n * @param gravity\n */\n\n\nexport function createGravityModel(gravity) {\n  if (isCompassGravity(gravity)) {\n    return createCompassGravityModel(gravity);\n  }\n\n  if (isOcrGravity(gravity)) {\n    return createOcrGravityModel();\n  }\n\n  if (isIAutoGravityString(gravity) || isAutoGravity(gravity)) {\n    return createAutoGravityModel(gravity);\n  }\n\n  return createFocusOnGravityModel(typeof gravity === 'string' ? createFocusOnGravity(gravity) : gravity);\n}","map":null,"metadata":{},"sourceType":"module"}