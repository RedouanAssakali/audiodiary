{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\laragon\\\\www\\\\ad-vmc-1\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/posts.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/user.service\";\nimport * as i4 from \"../../services/likes.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./profile-post/profile-post.component\";\nimport * as i7 from \"./profile-post-favorite/profile-post-favorite.component\";\n\nfunction ProfileComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_10_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const post_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.postSelection(post_r3);\n    });\n    i0.ɵɵelementStart(1, \"div\", 11);\n    i0.ɵɵelementStart(2, \"app-profile-post\", 14);\n    i0.ɵɵlistener(\"deleteSelected\", function ProfileComponent_div_10_Template_app_profile_post_deleteSelected_2_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onDelete($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const post_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"selectedPost\", ctx_r0.getSelectedPost)(\"audioPost\", post_r3);\n  }\n}\n\nfunction ProfileComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2, \"You have no fragments yet. Click here to record an audio.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProfileComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_18_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const post_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.favoritePostSelection(post_r7);\n    });\n    i0.ɵɵelementStart(1, \"app-profile-post-favorite\", 15);\n    i0.ɵɵlistener(\"deletedFavoriteSelected\", function ProfileComponent_div_18_Template_app_profile_post_favorite_deletedFavoriteSelected_1_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.onDeleteFavorite($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const post_r7 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"selectedFavoritePost\", ctx_r2.getSelectedFavoritePost)(\"audioPost\", post_r7);\n  }\n}\n\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    constructor(postsService, authService, userService, likesService) {\n      this.postsService = postsService;\n      this.authService = authService;\n      this.userService = userService;\n      this.likesService = likesService;\n      this.favoriteposts = [];\n      this.text = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\";\n    } // getAllPosts(): void{\n    //   this.postsService.restGetPosts().subscribe(\n    //     (data) => {\n    //       // @ts-ignore\n    //       this.posts = data; console.log(data);\n    //     },\n    //     (error) => console.log(\"Error: \" + error.status + \" - \" + error.error)\n    //   );\n    // }\n\n\n    getCurrentUserPosts() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        let currentUser = _this.authService.getUser();\n\n        console.log(currentUser);\n        yield _this.postsService.restGetPostsOfUser(currentUser.email).pipe().subscribe(data => {\n          _this.posts = data;\n          console.log(data);\n        });\n      })();\n    } // getFavPosts(): void{\n    //   this.postsService.restGetPosts().subscribe(\n    //     (data) => {\n    //       // @ts-ignore\n    //       this.favoritePost = data; console.log(data);\n    //     },\n    //     (error) => console.log(\"Error: \" + error.status + \" - \" + error.error)\n    //   );\n    // }\n\n\n    deletePosts(postId) {\n      this.postsService.restDeletePosts(postId).subscribe(response => {\n        console.log(response);\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    ngOnInit() {\n      this.getCurrentUser();\n      this.getCurrentUserPosts();\n      this.getFavPosts();\n    }\n\n    postSelection(postSelection) {\n      this.selectedPost = postSelection;\n    }\n\n    favoritePostSelection(favoritePostSelection) {\n      this.selectedFavoritePost = favoritePostSelection;\n    }\n\n    get getSelectedPost() {\n      return this.selectedPost;\n    }\n\n    get getSelectedFavoritePost() {\n      return this.selectedFavoritePost;\n    }\n\n    onDelete(post) {\n      let index = this.posts.indexOf(post);\n\n      if (index !== -1) {\n        this.posts.splice(index, 1);\n        this.deletePosts(post.id);\n        console.log(post.id);\n      } else {\n        return;\n      }\n\n      this.selectedPost = undefined;\n    }\n\n    onDeleteFavorite(fav) {\n      let index = this.favoritePost.indexOf(fav);\n\n      if (index !== -1) {\n        this.favoritePost.splice(index, 1);\n        this.deletePosts(fav.id);\n      } else {\n        return;\n      }\n\n      this.selectedFavoritePost = undefined;\n    }\n\n    getCurrentUser() {\n      this.userService.restGetUser(this.authService.getUser().email).pipe().subscribe(data => {\n        this.username = data.username;\n      });\n    }\n\n    getFavPosts() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        let currentUser = yield _this2.authService.getUser();\n        yield _this2.likesService.getFavorites(currentUser.email).subscribe(data => {\n          console.log(data);\n          data.forEach(like => {\n            console.log(like);\n\n            _this2.postsService.restGetPost(like.post.id).subscribe(post => {\n              _this2.favoriteposts.push(post);\n            });\n          });\n        });\n      })();\n    }\n\n  }\n\n  ProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.PostsService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.LikesService));\n  };\n\n  ProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    inputs: {\n      posts: \"posts\",\n      audioPost: \"audioPost\"\n    },\n    decls: 20,\n    vars: 4,\n    consts: [[1, \"profile-container\"], [1, \"title-container\"], [1, \"profile-header-pic\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-user\"], [1, \"profile-header-name\"], [1, \"profile-hr\"], [1, \"profile-top-section\"], [1, \"profile-section-title\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"whiteSpace\", 2, \"height\", \"30px\"], [1, \"allPosts\"], [1, \"whiteSpace\", 2, \"height\", \"150px\"], [3, \"click\"], [3, \"selectedPost\", \"audioPost\", \"deleteSelected\"], [3, \"selectedFavoritePost\", \"audioPost\", \"deletedFavoriteSelected\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"span\", 2);\n        i0.ɵɵelement(3, \"i\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"span\", 4);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"hr\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"h5\", 7);\n        i0.ɵɵtext(9, \"My Fragments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, ProfileComponent_div_10_Template, 3, 2, \"div\", 8);\n        i0.ɵɵtemplate(11, ProfileComponent_div_11_Template, 3, 0, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"div\", 10);\n        i0.ɵɵelementStart(13, \"div\", 6);\n        i0.ɵɵelement(14, \"hr\", 5);\n        i0.ɵɵelementStart(15, \"h5\", 7);\n        i0.ɵɵtext(16, \"Favorites\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 11);\n        i0.ɵɵtemplate(18, ProfileComponent_div_18_Template, 2, 2, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"div\", 12);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.username);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.posts.length == 0);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.favoriteposts);\n      }\n    },\n    directives: [i5.NgForOf, i5.NgIf, i6.ProfilePostComponent, i7.ProfilePostFavoriteComponent],\n    styles: [\".profile-header-pic[_ngcontent-%COMP%], .profile-header-name[_ngcontent-%COMP%]{display:inline-block;padding:5px}.profile-container[_ngcontent-%COMP%]{max-width:500px;margin:auto}.profile-hr[_ngcontent-%COMP%]{width:80%;background-color:#262626;opacity:30%}.profile-header-name[_ngcontent-%COMP%]{background-color:#262626;color:#fff;padding-left:20px;padding-right:20px;border-radius:20px}.profile-header-pic[_ngcontent-%COMP%]{margin-top:10px}.title-container[_ngcontent-%COMP%]{margin-left:5%}.profile-bin[_ngcontent-%COMP%]{cursor:pointer;padding-top:5px;float:right;color:#000;font-size:25px}.profile-bin[_ngcontent-%COMP%]:hover{font-size:30px}.fa-user[_ngcontent-%COMP%]{color:#262626;font-size:60px}.profile-section-title[_ngcontent-%COMP%]{color:#000;margin-left:7%}\"]\n  });\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}