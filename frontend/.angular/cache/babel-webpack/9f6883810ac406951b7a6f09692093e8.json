{"ast":null,"code":"import _asyncToGenerator from \"/Users/hannatoenbreker/IdeaProjects/ad-vmc-1/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/posts.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"../../../services/share.service\";\n\nfunction FeedviewComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"button\", 7);\n    i0.ɵɵtext(3, \"Filter on popular hashtag\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 8);\n    i0.ɵɵelementStart(5, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function FeedviewComponent_div_1_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.getPostByTheme(ctx_r2.popularPosts[0][0]);\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function FeedviewComponent_div_1_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.getPostByTheme(ctx_r4.popularPosts[1][0]);\n    });\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function FeedviewComponent_div_1_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.getPostByTheme(ctx_r5.popularPosts[2][0]);\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function FeedviewComponent_div_1_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.getPostByTheme(ctx_r6.popularPosts[3][0]);\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"1.\", ctx_r0.popularPosts[0][0], \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"2.\", ctx_r0.popularPosts[1][0], \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"3.\", ctx_r0.popularPosts[2][0], \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"4.\", ctx_r0.popularPosts[3][0], \"\");\n  }\n}\n\nfunction FeedviewComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-recording-post\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const post_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"audioPost\", post_r7);\n  }\n}\n\nexport let FeedviewComponent = /*#__PURE__*/(() => {\n  class FeedviewComponent {\n    constructor(postsService, router, route, meta, shareService) {\n      this.postsService = postsService;\n      this.router = router;\n      this.route = route;\n      this.meta = meta;\n      this.shareService = shareService;\n      this.popularPosts = null;\n      this.text = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\";\n      this.mapview = \"Mapview\";\n    }\n\n    ngOnInit() {\n      this.getAllPosts();\n      this.getMostPopularThemes();\n      this.route.queryParams.subscribe(params => {\n        console.log(params);\n\n        if (params.hashtag != null) {\n          this.getPostByTheme(params.hashtag);\n        }\n      });\n      this.getPostById();\n    }\n\n    getAllPosts() {\n      this.postsService.restGetPosts().subscribe(data => {\n        // @ts-ignore\n        this.posts = data; //console.log(data);\n      }, error => console.log(\"Error: \" + error.status + \" - \" + error.error));\n    }\n\n    getPostByTheme(theme) {\n      this.router.navigate(['/feedview'], {\n        queryParams: {\n          hashtag: theme\n        }\n      });\n      this.postsService.getPostsByTheme(theme).subscribe(data => {\n        // @ts-ignore\n        this.posts = data; //console.log(data);\n      }, error => console.log(\"Error: \" + error.status + \" - \" + error.error));\n    }\n\n    getMostPopularThemes() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this.postsService.getTopFiveThemes().then(result => {\n          _this.popularPosts = result;\n        }); //this.popularPosts = this.postsService.getTopFiveThemes();\n      })();\n    }\n\n    getPostById() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        const id = _this2.router.url.split(\"/\")[2];\n\n        console.log(+id);\n        console.log(id);\n        console.log(_this2.postsService.restGetPost(+id).subscribe(data => {\n          _this2.posts = [];\n          _this2.posts[0] = data;\n\n          _this2.shareService.setSocialMediaTags(\"https://audiodiary-fe-team1-staging.herokuapp.com\" + _this2.router.url, data.title, data.description, data.img);\n\n          console.log(data);\n        }, error => console.log(\"Error: \" + error.status + \" - \" + error.error))); //  returnColor(post: Post) {\n        //   switch (post.theme) {\n        //     case this.popularPosts[0]:\n        //       post.theme = \"red\"\n        //       break;\n        //     case this.popularPosts[1]:\n        //       post.theme = \"orange\"\n        //       break;\n        //     case this.popularPosts[2]:\n        //       post.theme = \"yellow\"\n        //       break;\n        //     case this.popularPosts[3]:\n        //       post.theme = \"green\"\n        //       break;\n        //     case this.popularPosts[4]:\n        //       post.theme = \"blue\"\n        //       break;\n        //     case this.popularPosts[5]:\n        //       post.theme = \"grey\"\n        //       break;\n        //   }\n        //\n        //   return post.theme;\n        // }\n      })();\n    }\n\n  }\n\n  FeedviewComponent.ɵfac = function FeedviewComponent_Factory(t) {\n    return new (t || FeedviewComponent)(i0.ɵɵdirectiveInject(i1.PostsService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Meta), i0.ɵɵdirectiveInject(i4.ShareService));\n  };\n\n  FeedviewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FeedviewComponent,\n    selectors: [[\"app-feedview\"]],\n    outputs: {\n      popularPosts: \"popularPosts\",\n      mapview: \"mapview\"\n    },\n    decls: 7,\n    vars: 7,\n    consts: [[3, \"switchText\"], [4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"What are you looking for?\", 1, \"searchTerm\", 3, \"ngModel\", \"ngModelChange\"], [1, \"allPosts\"], [4, \"ngFor\", \"ngForOf\"], [2, \"height\", \"140px\"], [\"ngbDropdown\", \"\", 1, \"d-inline-block\"], [\"id\", \"dropdownMenuButton\", \"ngbDropdownToggle\", \"\", 1, \"btn\", \"btn-outline-primary\"], [\"ngbDropdownMenu\", \"\", \"aria-labelledby\", \"dropdownMenuButton\"], [\"ngbDropdownItem\", \"\", 2, \"color\", \"#fa4114\", 3, \"click\"], [\"ngbDropdownItem\", \"\", 2, \"color\", \"#FFB366\", 3, \"click\"], [\"ngbDropdownItem\", \"\", 2, \"color\", \"#ACDF8D\", 3, \"click\"], [\"ngbDropdownItem\", \"\", 2, \"color\", \"#90D2E0\", 3, \"click\"], [3, \"audioPost\"]],\n    template: function FeedviewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-switch\", 0);\n        i0.ɵɵtemplate(1, FeedviewComponent_div_1_Template, 13, 4, \"div\", 1);\n        i0.ɵɵelementStart(2, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function FeedviewComponent_Template_input_ngModelChange_2_listener($event) {\n          return ctx.term = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtemplate(4, FeedviewComponent_div_4_Template, 2, 1, \"div\", 4);\n        i0.ɵɵpipe(5, \"filter\");\n        i0.ɵɵelement(6, \"div\", 5);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"switchText\", ctx.mapview);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.popularPosts);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.term);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(5, 4, ctx.posts, ctx.term));\n      }\n    },\n    styles: [\".allPosts[_ngcontent-%COMP%]{margin-bottom:120px}\"]\n  });\n  return FeedviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}