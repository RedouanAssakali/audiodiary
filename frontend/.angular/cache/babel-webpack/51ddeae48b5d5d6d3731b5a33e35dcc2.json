{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport * as RecordRTC from 'recordrtc';\nlet FooterComponent = class FooterComponent {\n  constructor(audioRecorderService, router, activatedRoute, domSanitizer, auth) {\n    this.audioRecorderService = audioRecorderService;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.domSanitizer = domSanitizer;\n    this.auth = auth;\n    this.showRecordBtn = true;\n    this.login = true;\n    this.value = './assets/img/rec-button.png'; //default_value\n    //Will use this flag for detect recording\n\n    this.recording = false;\n\n    if (auth.isLoggedIn() == null) {\n      this.login = false;\n    }\n  }\n\n  sanitize(url) {\n    return this.domSanitizer.bypassSecurityTrustUrl(url);\n  }\n  /**\r\n   * Start recording.\r\n   */\n\n\n  initiateRecording() {\n    this.recording = true;\n    let mediaConstraints = {\n      video: false,\n      audio: true\n    };\n    navigator.mediaDevices.getUserMedia(mediaConstraints).then(this.successCallback.bind(this), this.errorCallback.bind(this));\n  }\n  /**\r\n   * Will be called automatically.\r\n   */\n\n\n  successCallback(stream) {\n    var options = {\n      mimeType: \"audio/wav\",\n      numberOfAudioChannels: 1\n    }; //Start Actual Recording\n\n    var StereoAudioRecorder = RecordRTC.StereoAudioRecorder;\n    this.record = new StereoAudioRecorder(stream, options);\n    this.record.record();\n  }\n\n  logOut() {\n    this.auth.logout();\n  }\n\n  stopRecording() {\n    this.recording = false;\n    this.record.stop(this.processRecording.bind(this));\n  }\n  /**\r\n   * processRecording Do what ever you want with blob\r\n   * @param  {any} blob Blog\r\n   */\n\n\n  processRecording(blob) {\n    this.url = URL.createObjectURL(blob);\n  }\n  /**\r\n   * Process Error.\r\n   */\n\n\n  errorCallback(error) {\n    this.error = 'Can not play audio in your browser';\n  } // startRecording() {\n  //   this.audioRecorderService.startRecording();\n  //   console.log(\"recording\")\n  // }\n  //\n  // stopRecording() {\n  //   this.audioRecorderService.stopRecording(OutputFormat.WEBM_BLOB).then((output) => {\n  //     // do post output steps\n  //     console.log(\"it works\");\n  //   }).catch(errrorCase => {\n  //     console.log(\"error\")\n  //     // Handle Error\n  //   });\n  // }\n  // updateImage() {\n  //   this.value = 'https://www.pngall.com/wp-content/uploads/5/Pause-Button-Transparent.png';\n  // }\n\n\n  ngOnInit() {}\n\n};\nFooterComponent = __decorate([Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.css']\n})], FooterComponent);\nexport { FooterComponent };","map":null,"metadata":{},"sourceType":"module"}