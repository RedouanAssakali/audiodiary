{"ast":null,"code":"import { lossy, preserveTransparency, progressive } from \"../../qualifiers/flag.js\";\nimport { DeliveryAction } from \"./DeliveryAction.js\";\nimport { ProgressiveQualifier } from \"../../qualifiers/progressive.js\";\n/**\n * @memberOf Actions.Delivery\n * @extends {Actions.Delivery.DeliveryAction}\n * @see Visit {@link Actions.Delivery|Delivery} for an example\n */\n\nclass DeliveryFormatAction extends DeliveryAction {\n  constructor(deliveryKey, deliveryType) {\n    super(deliveryKey, deliveryType, 'formatType');\n  }\n  /**\n   * @description Uses lossy compression when delivering animated GIF files.\n   * @return {this}\n   */\n\n\n  lossy() {\n    this._actionModel.lossy = true;\n    this.addFlag(lossy());\n    return this;\n  }\n  /**\n   * @description Uses progressive compression when delivering JPG file format.\n   * @return {this}\n   */\n\n\n  progressive(mode) {\n    if (mode instanceof ProgressiveQualifier) {\n      this._actionModel.progressive = {\n        mode: mode.getFlagValue()\n      };\n      this.addFlag(mode);\n    } else {\n      this._actionModel.progressive = {\n        mode: mode\n      };\n      this.addFlag(progressive(mode));\n    }\n\n    return this;\n  }\n  /**\n   * @description Ensures that images with a transparency channel are delivered in PNG format.\n   */\n\n\n  preserveTransparency() {\n    this._actionModel.preserveTransparency = true;\n    this.addFlag(preserveTransparency());\n    return this;\n  }\n\n  static fromJson(actionModel) {\n    const {\n      formatType,\n      lossy,\n      progressive,\n      preserveTransparency\n    } = actionModel;\n    let result;\n\n    if (formatType) {\n      result = new this('f', formatType);\n    } else {\n      result = new this('f');\n    }\n\n    if (progressive) {\n      if (progressive.mode) {\n        result.progressive(progressive.mode);\n      } else {\n        result.progressive();\n      }\n    }\n\n    lossy && result.lossy();\n    preserveTransparency && result.preserveTransparency();\n    return result;\n  }\n\n}\n\nexport { DeliveryFormatAction };","map":null,"metadata":{},"sourceType":"module"}